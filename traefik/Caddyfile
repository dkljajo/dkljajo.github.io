# Redirect all HTTP to HTTPS
http:// {
  redir https://{host}{uri} permanent
}

# Nextcloud
https://nextcloud.dkljajo.duckdns.org {
  reverse_proxy nextcloud:80
  encode gzip
}

# Pi-hole
https://pihole.dkljajo.duckdns.org {
  reverse_proxy pihole:80
  encode gzip
}

# Checkmk
https://checkmk.dkljajo.duckdns.org {
  reverse_proxy checkmk:5000
  encode gzip
}

# WireGuard
https://wg.dkljajo.duckdns.org {
  reverse_proxy wireguard:51820
  encode gzip
}

# Optional: global security headers
{
  header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
  header X-Content-Type-Options "nosniff"
  header X-Frame-Options "DENY"
  header Referrer-Policy "no-referrer"
}
